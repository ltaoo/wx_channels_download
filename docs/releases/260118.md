---
title: v260118
---

# v260118

我经常在不同电脑下载视频，文件就非常零散，所以这次更新可以在 `nas` 上部署，直接下载到 `nas` 上就方便多了。

## 更新内容

### 新功能

- 将原先的 `mp` 命令改为 `serve` 命令
- 增加 `download.remoteServer` 配置，开启后请求该服务接口下载视频
- 公众号管理页面现在刷新后仍保留当前筛选项
- 图片类视频也支持在后台下载了
- 批量下载过程中支持中断创建下载任务
- 下载任务列表接口支持分页

### 问题修复

- 修复了公众号管理页面状态筛选项不生效的问题
- 修复了批量下载时存在图片类视频会中断下载的问题
- 修复了批量下载存在同名视频时实际下载到的视频数和展示的下载任务数不一致的问题

## 在 nas 上部署下载服务

下载 `linux` 版本的 `wx_channels_download`，上传到 `nas` 上，执行如下命令

```bash
./wx_channels_download serve -d
```

将以守护进程模式运行

> 建议修改 `config.yaml` 中下载目录为 `./downloads` 便于管理

然后修改本地的 `config.yaml` 增加如下配置

```yaml
download:
  remoteServer:
    enabled: true
    protocol: "http"
    hostname: "192.168.1.118"
    port: 2022
```

`192.168.1.118` 是我的 `nas` 服务内网地址，修改号之后启动下载器，点击下载按钮，就会提交到 `nas` 上下载了。

## 公众号 RSS 服务

实际用下来并不稳定，后面会移除掉该功能，改为公众号文章下载功能，预计包含如下功能

- 下载单篇文章
- 下载指定公众号所有文章
